# ğŸ§ª API æµ‹è¯•æŒ‡å—

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨æµè§ˆå™¨æµ‹è¯•

### 1. æµ‹è¯•æ ¹è·¯å¾„

ç›´æ¥åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
http://localhost:3000
```

åº”è¯¥çœ‹åˆ°æ¬¢è¿ä¿¡æ¯ã€‚

## æ–¹æ³•äºŒï¼šä½¿ç”¨ Postmanï¼ˆæ¨èï¼‰

### å¯¼å…¥æµ‹è¯•é›†åˆ

1. æ‰“å¼€ Postman
2. ç‚¹å‡» "Import"
3. é€‰æ‹©é¡¹ç›®ä¸­çš„ `postman-collection.json` æ–‡ä»¶
4. å¯¼å…¥æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°æ‰€æœ‰æ¥å£

### æµ‹è¯•æµç¨‹

1. **æ³¨å†Œç”¨æˆ·** â†’ æ‰§è¡Œ "è®¤è¯/æ³¨å†Œ" æ¥å£
2. **ç™»å½•** â†’ æ‰§è¡Œ "è®¤è¯/ç™»å½•" æ¥å£ï¼Œå¤åˆ¶è¿”å›çš„ token
3. **è®¾ç½® token** â†’ åœ¨å…¶ä»–æ¥å£çš„ Header ä¸­ï¼Œå°† `{{token}}` æ›¿æ¢ä¸ºå®é™…çš„ token
4. **æµ‹è¯•å…¶ä»–æ¥å£** â†’ åˆ›å»º Todoã€æŸ¥çœ‹åˆ—è¡¨ç­‰

## æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ curl å‘½ä»¤

### 1. æ³¨å†Œç”¨æˆ·

```bash
curl -X POST http://localhost:3000/api/auth/register ^
  -H "Content-Type: application/json" ^
  -d "{\"username\":\"å¼ ä¸‰\",\"email\":\"zhangsan@example.com\",\"password\":\"password123\"}"
```

### 2. ç™»å½•

```bash
curl -X POST http://localhost:3000/api/auth/login ^
  -H "Content-Type: application/json" ^
  -d "{\"email\":\"zhangsan@example.com\",\"password\":\"password123\"}"
```

**ä¿å­˜è¿”å›çš„ tokenï¼**

### 3. åˆ›å»º Todoï¼ˆéœ€è¦ tokenï¼‰

```bash
curl -X POST http://localhost:3000/api/todos ^
  -H "Authorization: Bearer ä½ çš„token" ^
  -H "Content-Type: application/json" ^
  -d "{\"title\":\"æ¯å¤©è·‘æ­¥5å…¬é‡Œ\",\"description\":\"åšæŒè¿åŠ¨\"}"
```

### 4. è·å– Todo åˆ—è¡¨

```bash
curl -X GET http://localhost:3000/api/todos ^
  -H "Authorization: Bearer ä½ çš„token"
```

### 5. æ›´æ–° Todoï¼ˆæ ‡è®°ä¸ºå®Œæˆï¼‰

```bash
curl -X PUT http://localhost:3000/api/todos/1 ^
  -H "Authorization: Bearer ä½ çš„token" ^
  -H "Content-Type: application/json" ^
  -d "{\"is_completed\":true}"
```

### 6. è·å–æ’è¡Œæ¦œ

```bash
curl -X GET http://localhost:3000/api/rankings ^
  -H "Authorization: Bearer ä½ çš„token"
```

## å®Œæ•´æµ‹è¯•åœºæ™¯

### åœºæ™¯ï¼šä¸¤ä¸ªç”¨æˆ·äº’ç›¸ç›‘ç£

1. **æ³¨å†Œç”¨æˆ· Aï¼ˆå¼ ä¸‰ï¼‰**
2. **æ³¨å†Œç”¨æˆ· Bï¼ˆæå››ï¼‰**
3. **å¼ ä¸‰ç™»å½•** â†’ è·å– token_A
4. **æå››ç™»å½•** â†’ è·å– token_B
5. **å¼ ä¸‰åˆ›å»º Todo**
6. **å¼ ä¸‰é‚€è¯·æå››ç›‘ç£**ï¼ˆéœ€è¦æå››çš„ user_idï¼‰
7. **æå››æŸ¥çœ‹ç›‘ç£çš„ Todo**
8. **æå››ç»™ Todo ç‚¹èµ**
9. **æå››è¯„è®º Todo**
10. **å¼ ä¸‰å®Œæˆ Todo**
11. **æŸ¥çœ‹æ’è¡Œæ¦œ**

## å“åº”æ ¼å¼

### æˆåŠŸå“åº”

```json
{
  "code": 0,
  "message": "success",
  "data": { ... }
}
```

### å¤±è´¥å“åº”

```json
{
  "code": 1,
  "message": "é”™è¯¯ä¿¡æ¯",
  "data": null
}
```

## å¸¸è§é”™è¯¯

### 401 Unauthorized

- åŸå› ï¼štoken æ— æ•ˆæˆ–æœªæä¾›
- è§£å†³ï¼šæ£€æŸ¥ Authorization header æ˜¯å¦æ­£ç¡®

### 403 Forbidden

- åŸå› ï¼šæ— æƒè®¿é—®è¯¥èµ„æº
- è§£å†³ï¼šç¡®è®¤æ˜¯å¦æœ‰æƒé™ï¼ˆåˆ›å»ºè€…æˆ–ç›‘ç£äººï¼‰

### 404 Not Found

- åŸå› ï¼šèµ„æºä¸å­˜åœ¨
- è§£å†³ï¼šæ£€æŸ¥ ID æ˜¯å¦æ­£ç¡®

## ä¸‹ä¸€æ­¥

- å°è¯•æ‰€æœ‰æ¥å£
- æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®å˜åŒ–
- é˜…è¯»æºä»£ç ç†è§£å®ç°é€»è¾‘
- å°è¯•æ·»åŠ æ–°åŠŸèƒ½

ç¥æµ‹è¯•æ„‰å¿«ï¼ğŸ‰
